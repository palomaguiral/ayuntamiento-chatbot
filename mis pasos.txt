- Instalar POETRY con curl
- Crear nuevo proyecto con Poestry: poetry new ayuntamiento_chatbot
                                    cd ayuntamiento_chatbot
- Cuando vuelvas a trabajar en el proyecto, necesitas activar el entorno virtual de Poetry antes de ejecutar cualquier comando.

· poetry.lock: Se actualiza automáticamente cada vez que ejecutas poetry install o poetry update, asegurando que todas las dependencias se instalen con versiones específicas
· Si solo ejecutas poetry update, pyproject.toml se mantiene igual, pero poetry.lock se actualiza con las versiones más recientes de las dependencias permitidas por las restricciones en pyproject.toml.
· pyproject.toml: Define las dependencias del proyecto, pero solo se actualiza si manualmente agregas, quitas o cambias versiones de paquetes con comandos.

- ✅ Para asegurarte de que usas Poetry en lugar de Conda, ejecuta poetry shell antes de iniciar la app.


1. Para no agregar las dependencias tú manualmente -> Usar pipreqs y luego importarlo a Poetry
    Si no tienes un requirements.txt, pero quieres generarlo automáticamente basado en los imports de tu código:
        pip install pipreqs
        pipreqs . --force
        poetry add $(cat requirements.txt)
2. Finalmente, instala todas las dependencias en Poetry
poetry lock --no-update
poetry install

############

- Creación de la API con FastAPI -> main.py


############

- Configuración de SQLAlchemy y Base de Datos -> database.py

###########


- Configuración de Alembic para Migraciones
    * Inicializar Alembic: alembic init migrations   - Se crea alembic.ini y la carpeta migrations/
    * Configurar alembic.ini para que use DATABASE_URL de database.py
        -Indicamos a los archivos alembic.ini y migrations/env.py que tiene que usar la base de datos según está en las vbles de entorno.
    * Crear y aplicar las migraciones
        alembic revision --autogenerate -m "Initial migration"



############

- Crear la base de datos
    *Desde pgAdmin 
    *Con los comandos en psql:  CREATE DATABASE chatbot_db;
                                CREATE USER chatbot_user WITH ENCRYPTED PASSWORD 'chatbot_password';
                                GRANT ALL PRIVILEGES ON DATABASE chatbot_db TO chatbot_user;


############
- Integración con LangGraph -> limpiar pregunta del usuario, buscar documentos más similares, responder con modelo IA





############
- Scrapear la página web entera del ayuntamiento recursivamente


############
- Guardar en la BD Chroma los embeddings de los textos scrapeados
- Función para encontrar los fragmentos más similares a una pregunta de entre los guardados en la BD con similarity_search.

############
- A partir de los documentos más relacionados con la pregunta del usuario, formatear la respuesta con un modelos de IA
(from langchain_ollama import OllamaLLM) para devolverle la respuetsa al usuario.
